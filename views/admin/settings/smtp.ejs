<%- include('../../components/template') %>

<main id="content" class="min-h-screen pb-10">

  <div class="px-8 pt-6">
    <h1 class="text-2xl font-semibold text-white tracking-tight">
      <%= req.translations.settings %>
    </h1>
    <p class="mt-2 text-sm text-neutral-400">
      <%= req.translations.changeSettings %>
    </p>
  </div>

  <%- include('../../components/settings') %>

  <div class="mx-8 mt-8 bg-white/5 border border-white/10 rounded-2xl shadow-lg backdrop-blur-md">

    <div class="px-6 py-4 border-b border-white/10">
      <h2 class="text-lg font-semibold text-white">
        <%= req.translations.smtp %>
      </h2>
    </div>

    <div class="p-6 grid grid-cols-1 lg:grid-cols-2 gap-10">

      <!-- SMTP Settings Form -->
      <form action="/admin/settings/saveSmtpSettings" method="POST" class="space-y-5">

        <div>
          <label for="smtpServer" class="block text-sm text-neutral-400">
            <%= req.translations.smtpServer %>
          </label>
          <input
            type="text"
            id="smtpServer"
            name="smtpServer"
            required
            value="<%= smtpSettings.server || '' %>"
            placeholder="<%= req.translations.smtpServer %>"
            class="mt-2 w-full rounded-xl bg-white/5 border border-white/10 text-white px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
          />
        </div>

        <div>
          <label for="smtpPort" class="block text-sm text-neutral-400">
            <%= req.translations.smtpPort %>
          </label>
          <input
            type="number"
            id="smtpPort"
            name="smtpPort"
            required
            value="<%= smtpSettings.port || '' %>"
            placeholder="<%= req.translations.smtpPort %>"
            class="mt-2 w-full rounded-xl bg-white/5 border border-white/10 text-white px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
          />
        </div>

        <div>
          <label for="smtpUser" class="block text-sm text-neutral-400">
            <%= req.translations.smtpUsername %>
          </label>
          <input
            type="text"
            id="smtpUser"
            name="smtpUser"
            required
            value="<%= smtpSettings.username || '' %>"
            placeholder="<%= req.translations.smtpUsername %>"
            class="mt-2 w-full rounded-xl bg-white/5 border border-white/10 text-white px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
          />
        </div>

        <div>
          <label for="smtpPass" class="block text-sm text-neutral-400">
            <%= req.translations.smtpPassword %>
          </label>
          <input
            type="password"
            id="smtpPass"
            name="smtpPass"
            required
            value="<%= smtpSettings.password || '' %>"
            placeholder="<%= req.translations.smtpPassword %>"
            class="mt-2 w-full rounded-xl bg-white/5 border border-white/10 text-white px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
          />
        </div>

        <div>
          <label for="smtpFromName" class="block text-sm text-neutral-400">
            <%= req.translations.mailFromName %>
          </label>
          <input
            type="text"
            id="smtpFromName"
            name="smtpFromName"
            required
            value="<%= smtpSettings.fromName || '' %>"
            placeholder="<%= req.translations.mailFromName %>"
            class="mt-2 w-full rounded-xl bg-white/5 border border-white/10 text-white px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
          />
        </div>

        <div>
          <label for="smtpFromAddress" class="block text-sm text-neutral-400">
            <%= req.translations.mailFromAddress %>
          </label>
          <input
            type="email"
            id="smtpFromAddress"
            name="smtpFromAddress"
            required
            value="<%= smtpSettings.fromAddress || '' %>"
            placeholder="<%= req.translations.mailFromAddress %>"
            class="mt-2 w-full rounded-xl bg-white/5 border border-white/10 text-white px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
          />
        </div>

        <button
          type="submit"
          class="w-full rounded-xl <%= theme['button-color'] %> px-4 py-2 text-sm font-medium shadow-md transition focus:outline-none">
          <%= req.translations.saveSmtpSettings %>
        </button>

      </form>

      <!-- Test Email Form -->
      <form action="/sendTestEmail" method="POST" class="space-y-5">

        <div>
          <label for="recipientEmail" class="block text-sm text-neutral-400">
            <%= req.translations.recipientEmail %>
          </label>
          <input
            type="email"
            id="recipientEmail"
            name="recipientEmail"
            required
            class="mt-2 w-full rounded-xl bg-white/5 border border-white/10 text-white px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
          />
        </div>

        <button
          type="submit"
          class="w-full rounded-xl bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 text-sm font-medium shadow-md transition focus:outline-none">
          <%= req.translations.sendTestEmail %>
        </button>

        <% if (req.query.msg === "TestemailSentsuccess") { %>
          <div class="text-emerald-500 text-sm">
            <%= req.translations.testEmailSuccess %>
          </div>
        <% } %>

        <% if (req.query.err === "TestemailSentfailed") { %>
          <div class="text-red-500 text-sm">
            <%= req.translations.testEmailFailed %>
          </div>
        <% } %>

        <% if (req.query.msg === "SmtpSaveSuccess") { %>
          <div class="text-emerald-500 text-sm">
            <%= req.translations.settingsSaved %>
          </div>
        <% } %>

        <% if (req.query.err === "SmtpSaveFailed") { %>
          <div class="text-red-500 text-sm">
            <%= req.translations.settingsSaveFailed %>
          </div>
        <% } %>

      </form>

    </div>
  </div>

</main>

<%- include('../../components/footer') %>
