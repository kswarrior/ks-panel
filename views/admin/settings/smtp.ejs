<%- include('../../components/template') %>

<main id="content" class="px-4 sm:px-6 lg:px-8 py-6">

  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
    <div>
      <h1 class="text-lg font-semibold text-white">
        <%= req.translations.settings %>
      </h1>
      <p class="mt-1 text-sm text-neutral-400">
        <%= req.translations.changeSettings %>
      </p>
    </div>
  </div>


  <!-- SMTP CARD -->
  <div class="mt-8 bg-white/5 border border-white/10 rounded-2xl overflow-hidden">

    <!-- Card Title -->
    <div class="px-6 py-4 border-b border-white/10 bg-white/5">
      <h2 class="text-white text-base font-medium">
        <%= req.translations.smtp %>
      </h2>
    </div>


    <div class="p-6 space-y-10">

      <!-- Save SMTP Settings -->
      <form action="/admin/settings/saveSmtpSettings" method="POST" class="space-y-6 max-w-3xl">

        <div>
          <label class="block text-sm text-neutral-400 mb-2">
            <%= req.translations.smtpServer %>
          </label>
          <input
            type="text"
            name="smtpServer"
            value="<%= smtpSettings.server || '' %>"
            placeholder="<%= req.translations.smtpServer %>"
            required
            class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
          />
        </div>

        <div>
          <label class="block text-sm text-neutral-400 mb-2">
            <%= req.translations.smtpPort %>
          </label>
          <input
            type="number"
            name="smtpPort"
            value="<%= smtpSettings.port || '' %>"
            placeholder="<%= req.translations.smtpPort %>"
            required
            class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
          />
        </div>

        <div>
          <label class="block text-sm text-neutral-400 mb-2">
            <%= req.translations.smtpUsername %>
          </label>
          <input
            type="text"
            name="smtpUser"
            value="<%= smtpSettings.username || '' %>"
            placeholder="<%= req.translations.smtpUsername %>"
            required
            class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
          />
        </div>

        <div>
          <label class="block text-sm text-neutral-400 mb-2">
            <%= req.translations.smtpPassword %>
          </label>
          <input
            type="password"
            name="smtpPass"
            value="<%= smtpSettings.password || '' %>"
            placeholder="<%= req.translations.smtpPassword %>"
            required
            class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
          />
        </div>

        <div>
          <label class="block text-sm text-neutral-400 mb-2">
            <%= req.translations.mailFromName %>
          </label>
          <input
            type="text"
            name="smtpFromName"
            value="<%= smtpSettings.fromName || '' %>"
            placeholder="<%= req.translations.mailFromName %>"
            required
            class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
          />
        </div>

        <div>
          <label class="block text-sm text-neutral-400 mb-2">
            <%= req.translations.mailFromAddress %>
          </label>
          <input
            type="email"
            name="smtpFromAddress"
            value="<%= smtpSettings.fromAddress || '' %>"
            placeholder="<%= req.translations.mailFromAddress %>"
            required
            class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
          />
        </div>

        <button
          type="submit"
          class="rounded-xl <%= theme['button-color'] %> px-5 py-2 text-sm font-medium shadow transition"
        >
          <%= req.translations.saveSmtpSettings %>
        </button>

      </form>


      <!-- Divider -->
      <div class="border-t border-white/10"></div>


      <!-- Test Email -->
      <form action="/sendTestEmail" method="POST" class="space-y-5 max-w-xl">

        <div>
          <label class="block text-sm text-neutral-400 mb-2">
            <%= req.translations.recipientEmail %>
          </label>
          <input
            type="email"
            name="recipientEmail"
            required
            class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
          />
        </div>

        <button
          type="submit"
          class="rounded-xl bg-blue-600 hover:bg-blue-500 px-5 py-2 text-sm font-medium text-white shadow transition"
        >
          <%= req.translations.sendTestEmail %>
        </button>


        <!-- Messages -->
        <% if (req.query.msg === "TestemailSentsuccess") { %>
          <p class="text-emerald-500 text-sm">
            <%= req.translations.testEmailSuccess %>
          </p>
        <% } %>

        <% if (req.query.err === "TestemailSentfailed") { %>
          <p class="text-red-500 text-sm">
            <%= req.translations.testEmailFailed %>
          </p>
        <% } %>

        <% if (req.query.msg === "SmtpSaveSuccess") { %>
          <p class="text-emerald-500 text-sm">
            <%= req.translations.settingsSaved %>
          </p>
        <% } %>

        <% if (req.query.err === "SmtpSaveFailed") { %>
          <p class="text-red-500 text-sm">
            <%= req.translations.settingsSaveFailed %>
          </p>
        <% } %>

      </form>

    </div>
  </div>

</main>

<%- include('../../components/footer') %>
