<%- include('../../components/template') %>

<main id="content" class="px-4 sm:px-6 lg:px-8 py-6">

  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
    <div>
      <h1 class="text-lg font-semibold text-white">
        <%= req.translations.settings %>
      </h1>
      <p class="mt-1 text-sm text-neutral-400">
        <%= req.translations.changeSettings %>
      </p>
    </div>
  </div>


  <!-- GENERAL SETTINGS CARD -->
  <div class="mt-8 bg-white/5 rounded-2xl border border-white/10 overflow-hidden">

    <!-- Card Title -->
    <div class="px-6 py-4 border-b border-white/10 bg-white/5">
      <h2 class="text-white text-base font-medium">
        <%= req.translations.general %>
      </h2>
    </div>

    <!-- Card Content -->
    <div class="p-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">


      <!-- Panel Name -->
      <div>
        <form action="/admin/settings/change/name" method="POST" class="space-y-4">
          <div>
            <label class="block text-sm text-neutral-400 mb-2">
              <%= req.translations.panelName %>
            </label>
            <input
              id="name"
              name="name"
              type="text"
              value="<%= name %>"
              placeholder="<%= name %>"
              required
              class="w-full rounded-xl bg-white/5 border border-white/10 px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/10"
            />
          </div>

          <button
            type="submit"
            class="rounded-xl <%= theme['button-color'] %> px-4 py-2 text-sm font-medium shadow transition"
          >
            <%= req.translations.save %>
          </button>
        </form>
      </div>


      <!-- Panel Logo -->
      <div>
        <form action="/admin/settings/change/logo" method="POST" enctype="multipart/form-data" class="space-y-4">

          <label class="block text-sm text-neutral-400">
            <%= req.translations.panelLogo %>
          </label>

          <div class="flex items-center gap-2">
            <input
              id="useImage"
              name="useImage"
              type="checkbox"
              class="w-4 h-4 rounded border-white/10 bg-transparent"
            />
            <span class="text-sm text-neutral-400">
              <%= req.translations.image %>
            </span>
          </div>

          <div id="imageUploadBox" class="hidden">
            <label class="block text-sm text-neutral-400 mb-2">
              <%= req.translations.uploadLogo %>
            </label>
            <input
              type="file"
              name="logo"
              id="logo"
              accept="image/*"
              class="block w-full text-sm text-neutral-300 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-medium file:bg-white/10 file:text-white hover:file:bg-white/20 transition"
            />
          </div>

          <input type="hidden" name="type" id="logoType" value="none">

          <button
            id="logoButton"
            type="submit"
            class="rounded-xl <%= theme['button-color'] %> px-4 py-2 text-sm font-medium shadow transition"
          >
            <%= req.translations.removeLogo %>
          </button>

        </form>
      </div>


      <!-- Register + Force Verify -->
      <div class="space-y-8">


        <!-- Register Toggle -->
        <form action="/admin/settings/toggle/register" method="POST" class="space-y-4">

          <div>
            <% if (settings.register === true) { %>
              <p class="text-sm text-neutral-400">
                <%= req.translations.registerPage %>
                <span class="ml-2 text-green-500 font-medium">
                  <%= req.translations.enabled %>
                </span>
              </p>
            <% } else { %>
              <p class="text-sm text-neutral-400">
                <%= req.translations.registerPage %>
                <span class="ml-2 text-red-500 font-medium">
                  <%= req.translations.disabled %>
                </span>
              </p>
            <% } %>
          </div>

          <div class="flex flex-col sm:flex-row gap-3">
            <% if (settings.register === true) { %>
              <button type="submit"
                class="rounded-lg bg-white text-neutral-900 px-4 py-2 text-sm font-medium shadow hover:bg-neutral-200 transition">
                <%= req.translations.disable %>
              </button>
            <% } else { %>
              <button type="submit"
                class="rounded-lg bg-white text-neutral-900 px-4 py-2 text-sm font-medium shadow hover:bg-neutral-200 transition">
                <%= req.translations.enable %>
              </button>
            <% } %>
          </div>
        </form>


        <!-- Force Verify Toggle -->
        <form action="/admin/settings/toggle/force-verify" method="POST" class="space-y-4">

          <div>
            <% if (settings.forceVerify === true) { %>
              <p class="text-sm text-neutral-400">
                <%= req.translations.forceVerifyEmail %>
                <span class="ml-2 text-green-500 font-medium">
                  <%= req.translations.enabled %>
                </span>
              </p>
            <% } else { %>
              <p class="text-sm text-neutral-400">
                <%= req.translations.forceVerifyEmail %>
                <span class="ml-2 text-red-500 font-medium">
                  <%= req.translations.disabled %>
                </span>
              </p>
            <% } %>
          </div>

          <div>
            <% if (settings.forceVerify === true) { %>
              <button type="submit"
                class="rounded-lg bg-white text-neutral-900 px-4 py-2 text-sm font-medium shadow hover:bg-neutral-200 transition">
                <%= req.translations.disable %>
              </button>
            <% } else { %>
              <button type="submit"
                class="rounded-lg bg-white text-neutral-900 px-4 py-2 text-sm font-medium shadow hover:bg-neutral-200 transition">
                <%= req.translations.enable %>
              </button>
            <% } %>
          </div>
        </form>


      </div>

    </div>
  </div>

</main>

<%- include('../../components/footer') %>

<script>
   document.getElementById('useImage').addEventListener('change', function() {
     const imageUploadBox = document.getElementById('imageUploadBox');
     const logoButton = document.getElementById('logoButton');
     const logoType = document.getElementById('logoType');
     
     if (this.checked) {
       imageUploadBox.classList.remove('hidden');
       logoButton.textContent = '<%= req.translations.saveNewLogo %>';
       logoType.value = 'image';
     } else {
       imageUploadBox.classList.add('hidden');
       logoButton.textContent = '<%= req.translations.removeLogo %>';
       logoType.value = 'none';
     }
   });
</script>
